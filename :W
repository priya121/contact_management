require "contact_persister"
require "contact_chooser"
require "delete"
require "search_screen"

class DeleteScreen

  def initialize(contacts,input,output)
    @contacts = contacts
    @input = input
    @output = output
  end

  def title
    "Delete a contact"
  end

  def show 
    @output.puts "Select a contact to delete:"
    filtered_contact = SearchScreen.new(@contacts,@input,@output).show
    puts filtered_contact.index_filtered_contact.inspect
    index = filtered_contact.index.filtered_contact
    @output.puts "Are you sure you want to delete this contact?"
    confirmation = @input.gets.chomp
    if confirmation == "Y"
      chosen_id = ContactChooser.new(@contacts,@input,@output).contact_chosen
      @output.puts Delete.new(@contacts,index_of_filtered_contact,@output).remove_contact
      @output.puts "Contact successfully deleted" 
    else
      @input.gets == "N"
      @output.puts @contacts
    end
  end
end
